---
// SideBySideReverse component from index.astro (#sbs-r section)

// Utils
import { Picture } from "astro:assets";

// Images
import construction from "@assets/images/services/construction.jpg";
import cabinets2 from "@assets/images/services/cabinets2.jpg";
import image from "@assets/images/backgrounds/rainbow-vortex.png";
import rippleBG from "@assets/SVGs/rainbow-vortex.svg";
---

<section id="sbs-r">
  <div class="cs-container">
    <div class="cs-image-group">
      <picture class="cs-picture">
        <!--Mobile Image-->
        <source
          media="(max-width: 600px)"
          srcset="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/People/gym5.jpg"
        />
        <!--Tablet and above Image-->
        <source
          media="(min-width: 601px)"
          srcset="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/People/gym5.jpg"
        />
        <img
          loading="lazy"
          decoding="async"
          src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/People/gym5.jpg"
          alt="body builder"
          width="562"
          height="568"
        />
      </picture>
      <picture class="cs-floater">
        <img
          class="cs-floater-icon"
          loading="lazy"
          decoding="async"
          src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/weights.svg"
          alt="icon"
          width="59"
          height="48"
        />
      </picture>
    </div>
    <div class="cs-content">
      <span class="cs-topper">Why Clients Trust Us</span>
      <h2 class="cs-title">
        Exterior Cleaning That Fits Local Homes and Local Budgets
      </h2>
    </div>
    <div class="cs-flex">
      <div class="cs-box">
        <div class="cs-box-content" data-box="one">
          <img
            class="cs-box-icon"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/red-house.svg"
            alt="icon"
            width="62"
            height="62"
          />
          <h3 class="cs-h3">Attentive, Owner-Led Service</h3>
          <p class="cs-box-text">
            Work is overseen directly by the owner, which allows questions to be
            answered quickly and details around the home or small business to be
            noticed and addressed.
          </p>
        </div>
        <div class="cs-box-content cs-hidden" data-box="two">
          <img
            class="cs-box-icon"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/red-house.svg"
            alt="icon"
            width="62"
            height="62"
          />
          <h3 class="cs-h3">Methods Matched to Each Surface</h3>
          <p class="cs-box-text">
            Pressure washing and soft washing techniques are selected based on
            whether the surface is concrete, pavers, vinyl siding, stucco, wood,
            or fencing. This approach is used to remove buildup while protecting
            the material.
          </p>
        </div>
        <div class="cs-box-content cs-hidden" data-box="three">
          <img
            class="cs-box-icon"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/red-house.svg"
            alt="icon"
            width="62"
            height="62"
          />
          <h3 class="cs-h3">Straightforward Square-Foot Pricing</h3>
          <p class="cs-box-text">
            Pricing is based on square footage and the areas requested, so
            estimates remain clear. There are no long-term service contracts
            required.
          </p>
        </div>
        <div class="cs-box-content cs-hidden" data-box="four">
          <img
            class="cs-box-icon"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/red-house.svg"
            alt="icon"
            width="62"
            height="62"
          />
          <h3 class="cs-h3">Introductory and Veteran Discounts</h3>
          <p class="cs-box-text">
            New customers receive 15% off their first service bill, and veterans
            receive 10% off qualifying services, applied after measurement and
            quoting.
          </p>
        </div>
      </div>
      <div class="cs-button-group">
        <button class="cs-button cs-active" data-filter="one">
          <picture class="cs-icon-wrapper">
            <img
              class="cs-icon"
              loading="lazy"
              decoding="async"
              src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/house-1a.svg"
              alt="icon"
              width="32"
              height="32"
            />
          </picture>
          <span class="cs-button-text">Attentive, Owner-Led Service</span>
          <img
            class="cs-arrow"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/gym-arrow.svg"
            alt="icon"
            width="32"
            height="32"
          />
        </button>
        <button class="cs-button" data-filter="two">
          <picture class="cs-icon-wrapper">
            <img
              class="cs-icon"
              loading="lazy"
              decoding="async"
              src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/hourglass-1a.svg"
              alt="icon"
              width="32"
              height="32"
            />
          </picture>
          <span class="cs-button-text">Methods Matched to Each Surface</span>
          <img
            class="cs-arrow"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/gym-arrow.svg"
            alt="icon"
            width="32"
            height="32"
          />
        </button>
        <button class="cs-button" data-filter="three">
          <picture class="cs-icon-wrapper">
            <img
              class="cs-icon"
              loading="lazy"
              decoding="async"
              src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/book-1a.svg"
              alt="icon"
              width="32"
              height="32"
            />
          </picture>
          <span class="cs-button-text">Straightforward Square-Foot Pricing</span
          >
          <img
            class="cs-arrow"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/gym-arrow.svg"
            alt="icon"
            width="32"
            height="32"
          />
        </button>
        <button class="cs-button" data-filter="one">
          <picture class="cs-icon-wrapper">
            <img
              class="cs-icon"
              loading="lazy"
              decoding="async"
              src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/invoice-1a.svg"
              alt="icon"
              width="32"
              height="32"
            />
          </picture>
          <span class="cs-button-text">Introductory and Veteran Discounts</span>
          <img
            class="cs-arrow"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Images/Icons/gym-arrow.svg"
            alt="icon"
            width="32"
            height="32"
          />
        </button>
      </div>
    </div>
  </div>
  <!-- Background Image -->
  <img
    alt="svg waves"
    decoding="async"
    src={rippleBG.src}
    aria-hidden="true"
    loading="lazy"
    class="cs-background"
    height="568"
    width="1280"
  />
</section>

<!-- <section id="sbs-r">
  <div class="cs-container">
    Left Image Section
    <div class="cs-left">
      <Picture
        src={construction}
        alt="house"
        width={400}
        height={560}
        formats={['avif', 'webp']}
        pictureAttributes={{ class: "cs-picture cs-picture1" }}
      />
      <Picture
        src={cabinets2}
        alt="cabinets"
        width={400}
        height={560}
        formats={['avif', 'webp']}
        pictureAttributes={{ class: "cs-picture cs-picture2" }}
      />
    </div>
    Right Content Section
    <div class="cs-right">
      <span class="cs-topper">SEO Ranking</span>
      <h2 class="cs-title">Talk about a main service keyword</h2>
      <p class="cs-text">
        In consequat tincidunt turpis sit amet imperdiet. Praesent Class
        officelan nonatoureanor mauris laoreet, iaculis libero quis. Curabitur
        et tempus eri consequat tincidunt turpis sit amet imperdiet. Praesent
        nonatourean olei aptent taciti sociosqu ad litora torquent per.
      </p>
      <p class="cs-text">
        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Non tenetur,
        iure nihil ipsam qui atque commodi id voluptatem nesciunt, quis animi
        fuga cum doloribus! Eaque laboriosam, unde consectetur iure asperiores
        ullam. Consequuntur debitis a voluptatibus vitae optio autem explicabo
        quia neque est quas, in placeat. Lorem ipsum dolor sit amet
        consectetur adipisicing elit. Doloribus modi laudantium voluptatibus
        rem libero error minus quia eligendi sapiente eos.
      </p>
    </div>
  </div>
</section> -->

<style lang="less">
  /* Mobile - 360px */
  @media only screen and (min-width: 0rem) {
    #sbs-r {
      padding: var(--sectionPadding);
      position: relative;
      overflow: hidden;
      z-index: 1;

      .cs-background {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        opacity: 0.75;
        object-fit: cover;
        z-index: -1;
      }

      .cs-container {
        width: 100%;
        max-width: (1280/16rem);
        margin: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        /* 48px - 64px */
        gap: clamp(3rem, 6vw, 4rem);
        position: relative;
        z-index: 1;
      }

      .cs-topper {
        width: auto;
      }

      .cs-content {
        text-align: left;
        width: 100%;
        max-width: (644/16rem);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .cs-title {
        margin: 0;
        max-width: 20ch;
      }

      .cs-flex {
        display: flex;
        flex-direction: column;
        gap: (48/16rem);
      }

      .cs-box {
        background-color: #1a1a1a;
        overflow: hidden;
        position: relative;
        z-index: 1;
      }

      .cs-box-content {
        margin: 0;
        /* 32px - 40px top & bottm */
        /* 24px - 40px left & right */
        padding: clamp(2rem, 2.5vw, 2.5rem) clamp(1.5rem, 3vw, 2.5rem);
        /* prevents padding from affecting width and height */
        box-sizing: border-box;
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        transition:
          hidden 0.3s,
          opacity 0.3s,
          transform 0.7s;

        &.cs-hidden {
          visibility: hidden;
          opacity: 0;
          position: absolute;
          top: 0;
          left: 0;
          transform: translateY(3rem);
        }
      }

      .cs-box-icon {
        text-align: left;
        width: (62/16rem);
        height: auto;
        margin: 0 0 (32/16rem);
        display: block;
      }

      .cs-h3 {
        /* 25px - 31px */
        font-size: clamp(1.5625rem, 2.5vw, 1.9375rem);
        line-height: 1.2em;
        text-align: inherit;
        font-weight: 700;
        margin: 0 0 (16/16rem);
        color: var(--bodyTextColorWhite);
      }

      .cs-box-text {
        font-size: (16/16rem);
        line-height: 1.5em;
        text-align: inherit;
        margin: 0;
        padding: 0;
        color: var(--bodyTextColorWhite);
        opacity: 0.8;
      }

      .cs-button-group {
        display: flex;
        flex-direction: column;
        gap: (24/16rem);
      }

      .cs-button {
        text-align: left;
        width: 100%;
        margin: 0;
        padding: 0 0 (24/16rem);
        background-color: transparent;
        border: none;
        border-bottom: 1px solid #e8e8e8;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        gap: (16/16rem);

        &.cs-active,
        &:hover {
          .cs-icon-wrapper {
            background-color: var(--primary);
          }

          .cs-icon {
            filter: grayscale(1) brightness(1000%);
          }

          .cs-arrow {
            filter: none;
            opacity: 1;
          }
        }

        &:hover {
          cursor: pointer;
        }
      }

      .cs-icon-wrapper {
        width: (60/16rem);
        height: (60/16rem);
        background-color: #f7f7f7;
        display: flex;
        justify-content: center;
        align-items: center;
        /* prevents flexbox from squishing them */
        flex: none;
        transition: background-color 0.3s;
      }

      .cs-icon {
        width: (32/16rem);
        height: auto;
        display: block;
      }

      .cs-button-text {
        font-size: (20/16rem);
        text-align: inherit;
        line-height: 1.2em;
        font-weight: 700;
        max-width: 19ch;
        margin: 0;
        padding: 0;
        color: var(--headerColor);
      }

      .cs-arrow {
        width: (32/16rem);
        margin-left: auto;
        filter: grayscale(1) brightness(100%);
        opacity: 0.2;
        height: auto;
        display: block;
      }

      .cs-image-group {
        width: 100%;
        height: 100vw;
        min-height: (400/16rem);
        /* chnages to 100% on desktop */
        max-height: (680/16rem);
        position: relative;
        z-index: 1;
      }

      .cs-picture {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;

        img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          display: block;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-floater {
        /* 72px - 120px */
        width: clamp(4.5rem, 10vw, 7.5rem);
        height: clamp(4.5rem, 10vw, 7.5rem);
        background-color: #1a1a1a;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        bottom: (24/16rem);
        right: (24/16rem);
        z-index: 10;
      }

      .cs-floater-icon {
        /* 32px - 60px */
        width: clamp(2rem, 4vw, 3.75rem);
        height: auto;
        display: block;
      }
    }
  }

  /* Tablet - 768px */
  @media only screen and (min-width: 48rem) {
    #sbs-r {
      .cs-container {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: flex-start;
        align-items: stretch;
      }

      .cs-flex {
        flex-direction: row;
        align-items: stretch;
      }

      .cs-box {
        width: 50%;
        height: 100%;
        display: flex;
        order: 2;
      }

      .cs-box-content {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .cs-button-group {
        width: 50%;
      }
    }
  }

  /* Desktop - 1024px */
  @media only screen and (min-width: 64rem) {
    #sbs-r {
      .cs-content {
        width: 53%;
        padding: (48/16rem) 0 0 0;
        box-sizing: border-box;
      }

      .cs-flex {
        width: 74%;
        max-width: (848/16rem);
        padding: 0 0 (48/16rem);
        box-sizing: border-box;
      }

      .cs-image-group {
        width: 40vw;
        max-width: (522/16rem);
        height: 100%;
        max-height: 100%;
        position: absolute;
        top: 0;
        right: 0;
        z-index: -1;
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0rem) {
    body.dark-mode {
      #sbs-r {
        background-color: var(--dark);

        .cs-title,
        .cs-button-text {
          color: var(--bodyTextColorWhite);
        }

        .cs-box {
          background-color: var(--dark);

          &:before {
            content: "";
            width: 100%;
            height: 100%;
            background: #000;
            opacity: 0.6;
            position: absolute;
            display: block;
            top: 0;
            left: 0;
          }
        }

        .cs-button {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .cs-arrow {
          filter: grayscale(1) brightness(300%);
          opacity: 0.5;
        }
      }
    }
  }
</style>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll("#sbs-r .cs-button");
    const boxContents = document.querySelectorAll("#sbs-r .cs-box-content");

    // Function to show the corresponding box content and hide others
    function showBoxContent(button) {
      const filterValue = button.getAttribute("data-filter");

      boxContents.forEach((box) => {
        if (box.getAttribute("data-box") === filterValue) {
          box.classList.remove("cs-hidden");
        } else {
          box.classList.add("cs-hidden");
        }
      });

      buttons.forEach((btn) => {
        if (btn === button) {
          btn.classList.add("cs-active");
        } else {
          btn.classList.remove("cs-active");
        }
      });
    }

    // Event listeners for screens below 1024px
    if (window.matchMedia("(max-width: 1024px)").matches) {
      buttons.forEach((button) => {
        button.addEventListener("click", () => showBoxContent(button));
      });
    }

    // Event listeners for screens above 1024px
    if (window.matchMedia("(min-width: 1024px)").matches) {
      buttons.forEach((button) => {
        button.addEventListener("mouseover", () => showBoxContent(button));
      });
    }
  });
</script>
